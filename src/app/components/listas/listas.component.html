<div class="flex titulo">
  <div draggable="false" class="list__title w-full text-center pb-2 text-lg font-medium">{{lista.titulo}}</div>
    <div draggable="false botao">
      <button
      type="button"
      draggable="false"
      (click)="changeMenu()"
      class="max-w-xs rounded-full flex items-center justify-center text-sm hover:bg-gray-300 h-6 w-6" id="user-menu-button"
      aria-expanded="false"
      aria-haspopup="true">
        <svg class="" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
          <path class="" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>
    <div class="{{displayMenuUser}} block absolute bg-white shadow-2xl p-1 rounded">
      <ul>
        <button class="hover:bg-gray-200 p-1 rounded" (click)="deletaLista()">deletar lista</button>
      </ul>
    </div>
</div>
<div class="cards rounded w-72">
    <app-card
    class="draggable_card"
    id="card_{{card._id}}"
    *ngFor="let card of this.lista.cards" 
    [card]="card"
    draggable="true"  
    (dragstart)="DragStart($event)"
    (dragend)="DragEnd($event)"
    ></app-card>
</div>
<button class="w-full flex justify-center p-2 button" (click)="toogle()">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path class="path_icon" stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
      </svg>
    <span class="card__text__button text-xs">Card</span>
</button>

<div draggable="false">
  <form  id="modalCard" 
  class="modal grid grid-cols-7 gap-4 top-1/2 left-1/2 bg-gray-200 
  rounded-md w-[700px] fixed z-50 pointer-events-auto p-2" 
  *ngIf="modal"
  (ngSubmit)="CriaCard()">
    <div class="col-span-4">
      <div class="flex flex-col pt-5">
        <input class="text-2xl font-semibold" id="titulo" type="text" name="titulo" placeholder="Titulo" [(ngModel)]="tituloCard">
    </div>
    <div class="flex flex-col">
      <label for="projeto">Projeto</label>
      <select
      id="projeto" 
      name="projeto"
      [(ngModel)]="projeto_id_card"
      class=" mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
        <option
        class="text-base"
        *ngFor="let projeto of this.projetos"
        [value]="projeto._id">
        {{projeto.titulo}}
      </option>
      </select>
    </div>
    <div class="flex justify-center">
      <div class="flex flex-col p-1 m-1">
        <label for="inicio">Inicio</label>
        <input class="date" type="date" id="inicio" name="trip-start"
        [(ngModel)]="dataInicio" [min]="today">
      </div>
      <div class="flex flex-col p-1 m-1">
        <label for="previsao">Previsao</label>
        <input class="date" type="date" id="previsao" name="trip-start"
        [(ngModel)]="dataPrevisao"
      [min]="today">
      </div>
    </div>
  </div>
  <div class="flex flex-col items-end col-span-3 mr-5">
    <button for="label" class="bg-gray-300 p-2 m-2 w-1/2 rounded">Dono</button>
    <button for="label" class="bg-gray-300 p-2 m-2 w-1/2 rounded" (click)="MenuSetLabel()">Label</button>
    <div class="bg-gray-200 drop-shadow-lg rounded-lg top-24 right-10 w-48 min-h-[96px] absolute flex flex-col justify-around items-center {{hiddenLabel}}">
      <div class="flex justify-around items-center w-full px-5 rounded-lg  bg-gray-100">
        <span class="flex justify-center items-center h-10 text-xl font-semibold w-full ">Labels</span>
        <button (click)="this.MenuSetLabel()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      <ul>
        <li *ngFor="let item of this.labels" class="py-1 px-2 mt-2 rounded-lg font-bold" [ngStyle]="{backgroundColor: item.cor, color: this.getCorText(item.cor)}">{{item.titulo}}</li>
      </ul>
      <button (click)="MenuCriaLabel()" class="p-2 m-2 bg-gray-300 rounded">Criar novo Label</button>
    </div>
    <div class="bg-gray-200 drop-shadow-lg rounded-lg top-24 right-10 w-96 min-h-[96px] absolute flex flex-col justify-around items-center {{hiddenCriaLabel}}">
      <div class="flex justify-around items-center w-full rounded-lg px-5 bg-gray-100">
        <button (click)="this.MenuCriaLabel()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <span class="flex justify-center items-center h-10 text-xl font-semibold w-full">Labels</span>
      </div>
      <input placeholder="Titulo Label" class="inputCriaCard mt-2" type="text" name="novoLabel" [ngModel]="novoLabel" (ngModelChange)="modelChangeFn($event)">
      <div class="py-1 px-2 mt-2 rounded-lg font-bold" [ngStyle]="{backgroundColor: this.novaCorlabel[0], color: this.novaCorlabel[1]}">
        {{novoLabel}}
      </div>
        <div class="flex flex-wrap p-1 m-1">
          <button class="w-7 h-7 p-1 m-1 rounded-full" 
          *ngFor="let item of this.listaLabelColor" 
          [ngStyle]="{backgroundColor: item[0]}"
          (click)="SetLabel(item)"
          ></button>
        </div>
      <button (click)="CriaLabel()" class="p-2 m-2 bg-gray-300 rounded">Criar Label</button>
    </div>
    <button for="label" class="bg-gray-300 p-2 m-2 w-1/2 rounded">Concluido</button>
  </div>
    <div class="col-span-6 flex justify-center">
      <button class="button_salvar btn" type="submit">
        Salvar
      </button>
      <button class="button_fechar btn" (click)="toogle()">
        Fechar
      </button>
    </div>
</form>
</div>